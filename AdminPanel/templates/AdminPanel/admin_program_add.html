{% extends 'AdminPanel/admin_base.html' %}

{% load static %}

{% load widget_tweaks %}

{% block head %}
    <script>
        {% if is_valid is False %}
            alert('اطلاعات، اشتباه وارد شده است.');
        {% elif is_valid is True %}
            alert('برنامه با موفقیت اضافه شد.');
            location.replace("{% url 'AdminPanel:admin_panel_program' %}");
        {% endif %}
    </script>

    <style>
        hr.between {
            background-color: #ff6200;
            height: 1px;
        }

        hr.between_dotted {
            border-top: 2px dotted #ff6200;
        }
    </style>

    <!-- flatpickr -->
    <link rel="stylesheet" href="{% static 'AdminPanel/plugins/flatpickr/flatpickr.min.css' %}">
    <link rel="stylesheet" href="{% static 'AdminPanel/plugins/flatpickr/material_blue.css' %}">
{% endblock %}

{% block message %}
    {% if form.errors %}
        <blockquote class="quote-danger">
            <h5 id="note">هشدار!</h5>
            <p>{{ form.errors }}</p>
        </blockquote>
    {% endif %}
{% endblock %}

{% block main_content %}
    <div class="col-md-6">
        <div class="card card-primary">
            <div class="card-header">
                <h3 class="card-title">افزودن برنامه</h3>
                <div class="card-tools">
                    <button type="button" class="btn btn-tool" data-card-widget="collapse" title="Collapse">
                        <i class="fas fa-minus"></i>
                    </button>
                </div>
            </div>
            <div class="card-body">
                <form method="post" enctype="multipart/form-data" id="form_add">
                    {% csrf_token %}
                    {% if form.non_field_errors %}
                        <br> {{ form.non_field_errors }}
                    {% endif %}
                    <div class="form-group">
                        {% if form.status.errors %}
                            {{ form.status.errors }}
                        {% endif %}
                        <label for="{{ form.status.id_for_label }}">وضعیت :</label> <br>
                        {% render_field form.status class+="form-control" %}
                        {% if form.status.help_text %}
                            {{ form.status.help_text }} <br>
                        {% endif %}
                    </div>
                    <div class="form-group">
                        {% if form.title.errors %}
                            {{ form.title.errors }}
                        {% endif %}
                        <label for="{{ form.title.id_for_label }}">عنوان :</label> <br>
                        {% render_field form.title class+="form-control" %}
                        {% if form.title.help_text %}
                            {{ form.title.help_text }} <br>
                        {% endif %}
                    </div>
                    <div class="form-group">
                        {% if form.description.errors %}
                            {{ form.description.errors }}
                        {% endif %}
                        <label for="{{ form.description.id_for_label }}">توضیحات :</label> <br>
                        {% render_field form.description class+="form-control" rows="4" %}
                        {% if form.description.help_text %}
                            {{ form.description.help_text }} <br>
                        {% endif %}
                    </div>
                    <div class="form-group">
                        {% if form.title_in_player.errors %}
                            {{ form.title_in_player.errors }}
                        {% endif %}
                        <label for="{{ form.title_in_player.id_for_label }}">عنوان در صفحه پخش زنده :</label> <br>
                        {% render_field form.title_in_player class+="form-control" %}
                        {% if form.title_in_player.help_text %}
                            {{ form.title_in_player.help_text }} <br>
                        {% endif %}
                    </div>
                    <div class="form-group">
                        {% if form.description_in_player.errors %}
                            {{ form.description_in_player.errors }}
                        {% endif %}
                        <label for="{{ form.description_in_player.id_for_label }}">توضیحات در صفحه پخش زنده :</label>
                        <br>
                        {% render_field form.description_in_player class+="form-control" rows="4" %}
                        {% if form.description_in_player.help_text %}
                            {{ form.description_in_player.help_text }} <br>
                        {% endif %}
                    </div>
                    <div class="form-group">
                        {% if form.slug.errors %}
                            {{ form.slug.errors }}
                        {% endif %}
                        <label for="{{ form.slug.id_for_label }}">Slug :</label> <br>
                        {% render_field form.slug class+="form-control" %}
                        {% if form.slug.help_text %}
                            {{ form.slug.help_text }} <br>
                        {% endif %}
                    </div>
                    <div class="form-group">
                        {% if form.date_display.errors %}
                            {{ form.date_display.errors }}
                        {% endif %}
                        <label for="{{ form.date_display.id_for_label }}">تاریخ نمایش داده شده به کاربر :</label> <br>
                        {% render_field form.date_display class+="form-control" %}
                        {% if form.date_display.help_text %}
                            {{ form.date_display.help_text }} <br>
                        {% endif %}
                    </div>
                    <div class="form-group">
                        {% if form.time_display.errors %}
                            {{ form.time_display.errors }}
                        {% endif %}
                        <label for="{{ form.time_display.id_for_label }}">زمان نمایش داده شده به کاربر :</label> <br>
                        {% render_field form.time_display class+="form-control" %}
                        {% if form.time_display.help_text %}
                            {{ form.time_display.help_text }} <br>
                        {% endif %}
                    </div>
                    <div class="form-group">
                        {% if form.datetime_type.errors %}
                            {{ form.datetime_type.errors }}
                        {% endif %}
                        <label for="{{ form.datetime_type.id_for_label }}">نوع برگزاری برنامه :</label> <br>
                        {% render_field form.datetime_type onchange="show_hide_datetime_type()" class+="form-control" %}
                        <br>
                        {% if form.datetime_type.help_text %}
                            {{ form.datetime_type.help_text }} <br>
                        {% endif %}
                    </div>
                    <div id="div_id_weekly" style="display: none">
                        <hr class="between">
                        <div class="form-group">
                            {% if form.start_date.errors %}
                                {{ form.start_date.errors }}
                            {% endif %}
                            <label for="{{ form.start_date.id_for_label }}">تاریخ شروع برنامه هفتگی :</label> <br>
                            <div class="input-group">
                                {% render_field form.start_date type="date" class+="form-control" %}
                                <div class="input-group-append">
                                <span class="input-group-text btn btn-danger btn-sm"
                                      onclick="document.getElementById('id_start_date').value=''">
                                    <i class="fas fa-times"></i>
                                </span>
                                </div>
                            </div>
                            {% if form.start_date.help_text %}
                                {{ form.start_date.help_text }} <br>
                            {% endif %}
                        </div>
                        <div class="form-group">
                            {% if form.end_date.errors %}
                                {{ form.end_date.errors }}
                            {% endif %}
                            <label for="{{ form.end_date.id_for_label }}">تاریخ پایان برنامه هفتگی :</label> <br>
                            <div class="input-group">
                                {% render_field form.end_date type="date" class+="form-control" %}
                                <div class="input-group-append">
                                <span class="input-group-text btn btn-danger btn-sm"
                                      onclick="document.getElementById('id_end_date').value=''">
                                    <i class="fas fa-times"></i>
                                </span>
                                </div>
                            </div>
                            {% if form.end_date.help_text %}
                                {{ form.end_date.help_text }} <br>
                            {% endif %}
                        </div>
                        <hr class="between_dotted">
                        <div class="form-group">
                            {% if form.day_0.errors %}
                                {{ form.day_0.errors }}
                            {% endif %}
                            {% if form.day_1.errors %}
                                {{ form.day_1.errors }}
                            {% endif %}
                            {% if form.day_2.errors %}
                                {{ form.day_2.errors }}
                            {% endif %}
                            {% if form.day_3.errors %}
                                {{ form.day_3.errors }}
                            {% endif %}
                            {% if form.day_4.errors %}
                                {{ form.day_4.errors }}
                            {% endif %}
                            {% if form.day_5.errors %}
                                {{ form.day_5.errors }}
                            {% endif %}
                            {% if form.day_6.errors %}
                                {{ form.day_6.errors }}
                            {% endif %}
                            <table class="table table-bordered">
                                <thead>
                                <tr>
                                    <th style="width: 10px">#</th>
                                    <th>روز های هفته</th>
                                    <th style="width: 40px"></th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <td>1.</td>
                                    <td>شنبه</td>
                                    <td>{% render_field form.day_0 class+="form-control" onclick="show_hide_week_day(0)" %}</td>
                                </tr>
                                <tr>
                                    <td>2.</td>
                                    <td>یکشنبه</td>
                                    <td>{% render_field form.day_1 class+="form-control" onclick="show_hide_week_day(1)" %}</td>
                                </tr>
                                <tr>
                                    <td>3.</td>
                                    <td>دوشنبه</td>
                                    <td>{% render_field form.day_2 class+="form-control" onclick="show_hide_week_day(2)" %}</td>
                                </tr>
                                <tr>
                                    <td>4.</td>
                                    <td>سه شنبه</td>
                                    <td>{% render_field form.day_3 class+="form-control" onclick="show_hide_week_day(3)" %}</td>
                                </tr>
                                <tr>
                                    <td>5.</td>
                                    <td>چهارشنبه</td>
                                    <td>{% render_field form.day_4 class+="form-control" onclick="show_hide_week_day(4)" %}</td>
                                </tr>
                                <tr>
                                    <td>6.</td>
                                    <td>پنج شنبه</td>
                                    <td>{% render_field form.day_5 class+="form-control" onclick="show_hide_week_day(5)" %}</td>
                                </tr>
                                <tr>
                                    <td>7.</td>
                                    <td>جمعه</td>
                                    <td>{% render_field form.day_6 class+="form-control" onclick="show_hide_week_day(6)" %}</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                        <hr id="hr_id_end_weekly_table" class="between_dotted" style="display: none">
                        <div id="div_id_day_0" style="display: none">
                            <div class="form-group">
                                {% if form.start_time_day_0.errors %}
                                    {{ form.start_time_day_0.errors }}
                                {% endif %}
                                <label for="{{ form.start_time_day_0.id_for_label }}">ساعت شروع برنامه (شنبه ها)
                                    :</label>
                                <br>
                                <div class="input-group">
                                    {% render_field form.start_time_day_0 type="time" class+="form-control" %}
                                    <div class="input-group-append">
                                <span class="input-group-text btn btn-danger btn-sm"
                                      onclick="document.getElementById('id_start_time_day_0').value=''">
                                    <i class="fas fa-times"></i>
                                </span>
                                    </div>
                                </div>
                                {% if form.start_time_day_0.help_text %}
                                    {{ form.start_time_day_0.help_text }} <br>
                                {% endif %}
                            </div>
                            <div class="form-group">
                                {% if form.end_time_day_0.errors %}
                                    {{ form.end_time_day_0.errors }}
                                {% endif %}
                                <label for="{{ form.end_time_day_0.id_for_label }}">ساعت پایان برنامه (شنبه ها)
                                    :</label>
                                <br>
                                <div class="input-group">
                                    {% render_field form.end_time_day_0 type="time" class+="form-control" %}
                                    <div class="input-group-append">
                                <span class="input-group-text btn btn-danger btn-sm"
                                      onclick="document.getElementById('id_end_time_day_0').value=''">
                                    <i class="fas fa-times"></i>
                                </span>
                                    </div>
                                </div>
                                {% if form.end_time_day_0.help_text %}
                                    {{ form.end_time_day_0.help_text }} <br>
                                {% endif %}
                            </div>
                            <hr class="between_dotted">
                        </div>
                        <div id="div_id_day_1" style="display: none">
                            <div class="form-group">
                                {% if form.start_time_day_1.errors %}
                                    {{ form.start_time_day_1.errors }}
                                {% endif %}
                                <label for="{{ form.start_time_day_1.id_for_label }}">ساعت شروع برنامه (یکشنبه ها)
                                    :</label>
                                <br>
                                <div class="input-group">
                                    {% render_field form.start_time_day_1 type="time" class+="form-control" %}
                                    <div class="input-group-append">
                                <span class="input-group-text btn btn-danger btn-sm"
                                      onclick="document.getElementById('id_start_time_day_1').value=''">
                                    <i class="fas fa-times"></i>
                                </span>
                                    </div>
                                </div>
                                {% if form.start_time_day_1.help_text %}
                                    {{ form.start_time_day_1.help_text }} <br>
                                {% endif %}
                            </div>
                            <div class="form-group">
                                {% if form.end_time_day_1.errors %}
                                    {{ form.end_time_day_1.errors }}
                                {% endif %}
                                <label for="{{ form.end_time_day_1.id_for_label }}">ساعت پایان برنامه (یکشنبه ها)
                                    :</label>
                                <br>
                                <div class="input-group">
                                    {% render_field form.end_time_day_1 type="time" class+="form-control" %}
                                    <div class="input-group-append">
                                <span class="input-group-text btn btn-danger btn-sm"
                                      onclick="document.getElementById('id_end_time_day_1').value=''">
                                    <i class="fas fa-times"></i>
                                </span>
                                    </div>
                                </div>
                                {% if form.end_time_day_1.help_text %}
                                    {{ form.end_time_day_1.help_text }} <br>
                                {% endif %}
                            </div>
                            <hr class="between_dotted">
                        </div>
                        <div id="div_id_day_2" style="display: none">
                            <div class="form-group">
                                {% if form.start_time_day_2.errors %}
                                    {{ form.start_time_day_2.errors }}
                                {% endif %}
                                <label for="{{ form.start_time_day_2.id_for_label }}">ساعت شروع برنامه (دوشنبه ها)
                                    :</label>
                                <br>
                                <div class="input-group">
                                    {% render_field form.start_time_day_2 type="time" class+="form-control" %}
                                    <div class="input-group-append">
                                <span class="input-group-text btn btn-danger btn-sm"
                                      onclick="document.getElementById('id_start_time_day_2').value=''">
                                    <i class="fas fa-times"></i>
                                </span>
                                    </div>
                                </div>
                                {% if form.start_time_day_2.help_text %}
                                    {{ form.start_time_day_2.help_text }} <br>
                                {% endif %}
                            </div>
                            <div class="form-group">
                                {% if form.end_time_day_2.errors %}
                                    {{ form.end_time_day_2.errors }}
                                {% endif %}
                                <label for="{{ form.end_time_day_2.id_for_label }}">ساعت پایان برنامه (دوشنبه ها)
                                    :</label>
                                <br>
                                <div class="input-group">
                                    {% render_field form.end_time_day_2 type="time" class+="form-control" %}
                                    <div class="input-group-append">
                                <span class="input-group-text btn btn-danger btn-sm"
                                      onclick="document.getElementById('id_end_time_day_2').value=''">
                                    <i class="fas fa-times"></i>
                                </span>
                                    </div>
                                </div>
                                {% if form.end_time_day_2.help_text %}
                                    {{ form.end_time_day_2.help_text }} <br>
                                {% endif %}
                            </div>
                            <hr class="between_dotted">
                        </div>
                        <div id="div_id_day_3" style="display: none">
                            <div class="form-group">
                                {% if form.start_time_day_3.errors %}
                                    {{ form.start_time_day_3.errors }}
                                {% endif %}
                                <label for="{{ form.start_time_day_3.id_for_label }}">ساعت شروع برنامه (سه شنبه ها)
                                    :</label>
                                <br>
                                <div class="input-group">
                                    {% render_field form.start_time_day_3 type="time" class+="form-control" %}
                                    <div class="input-group-append">
                                <span class="input-group-text btn btn-danger btn-sm"
                                      onclick="document.getElementById('id_start_time_day_3').value=''">
                                    <i class="fas fa-times"></i>
                                </span>
                                    </div>
                                </div>
                                {% if form.start_time_day_3.help_text %}
                                    {{ form.start_time_day_3.help_text }} <br>
                                {% endif %}
                            </div>
                            <div class="form-group">
                                {% if form.end_time_day_3.errors %}
                                    {{ form.end_time_day_3.errors }}
                                {% endif %}
                                <label for="{{ form.end_time_day_3.id_for_label }}">ساعت پایان برنامه (سه شنبه ها)
                                    :</label>
                                <br>
                                <div class="input-group">
                                    {% render_field form.end_time_day_3 type="time" class+="form-control" %}
                                    <div class="input-group-append">
                                <span class="input-group-text btn btn-danger btn-sm"
                                      onclick="document.getElementById('id_end_time_day_3').value=''">
                                    <i class="fas fa-times"></i>
                                </span>
                                    </div>
                                </div>
                                {% if form.end_time_day_3.help_text %}
                                    {{ form.end_time_day_3.help_text }} <br>
                                {% endif %}
                            </div>
                            <hr class="between_dotted">
                        </div>

                        <div id="div_id_day_4" style="display: none">
                            <div class="form-group">
                                {% if form.start_time_day_4.errors %}
                                    {{ form.start_time_day_4.errors }}
                                {% endif %}
                                <label for="{{ form.start_time_day_4.id_for_label }}">ساعت شروع برنامه (چهارشنبه ها)
                                    :</label>
                                <br>
                                <div class="input-group">
                                    {% render_field form.start_time_day_4 type="time" class+="form-control" %}
                                    <div class="input-group-append">
                                <span class="input-group-text btn btn-danger btn-sm"
                                      onclick="document.getElementById('id_start_time_day_4').value=''">
                                    <i class="fas fa-times"></i>
                                </span>
                                    </div>
                                </div>
                                {% if form.start_time_day_4.help_text %}
                                    {{ form.start_time_day_4.help_text }} <br>
                                {% endif %}
                            </div>
                            <div class="form-group">
                                {% if form.end_time_day_4.errors %}
                                    {{ form.end_time_day_4.errors }}
                                {% endif %}
                                <label for="{{ form.end_time_day_4.id_for_label }}">ساعت پایان برنامه (چهارشنبه ها)
                                    :</label>
                                <br>
                                <div class="input-group">
                                    {% render_field form.end_time_day_4 type="time" class+="form-control" %}
                                    <div class="input-group-append">
                                <span class="input-group-text btn btn-danger btn-sm"
                                      onclick="document.getElementById('id_end_time_day_4').value=''">
                                    <i class="fas fa-times"></i>
                                </span>
                                    </div>
                                </div>
                                {% if form.end_time_day_4.help_text %}
                                    {{ form.end_time_day_4.help_text }} <br>
                                {% endif %}
                            </div>
                            <hr class="between_dotted">
                        </div>

                        <div id="div_id_day_5" style="display: none">
                            <div class="form-group">
                                {% if form.start_time_day_5.errors %}
                                    {{ form.start_time_day_5.errors }}
                                {% endif %}
                                <label for="{{ form.start_time_day_5.id_for_label }}">ساعت شروع برنامه (پنجشنبه ها)
                                    :</label>
                                <br>
                                <div class="input-group">
                                    {% render_field form.start_time_day_5 type="time" class+="form-control" %}
                                    <div class="input-group-append">
                                <span class="input-group-text btn btn-danger btn-sm"
                                      onclick="document.getElementById('id_start_time_day_5').value=''">
                                    <i class="fas fa-times"></i>
                                </span>
                                    </div>
                                </div>
                                {% if form.start_time_day_5.help_text %}
                                    {{ form.start_time_day_5.help_text }} <br>
                                {% endif %}
                            </div>
                            <div class="form-group">
                                {% if form.end_time_day_5.errors %}
                                    {{ form.end_time_day_5.errors }}
                                {% endif %}
                                <label for="{{ form.end_time_day_5.id_for_label }}">ساعت پایان برنامه (پنجشنبه ها)
                                    :</label>
                                <br>
                                <div class="input-group">
                                    {% render_field form.end_time_day_5 type="time" class+="form-control" %}
                                    <div class="input-group-append">
                                <span class="input-group-text btn btn-danger btn-sm"
                                      onclick="document.getElementById('id_end_time_day_5').value=''">
                                    <i class="fas fa-times"></i>
                                </span>
                                    </div>
                                </div>
                                {% if form.end_time_day_5.help_text %}
                                    {{ form.end_time_day_5.help_text }} <br>
                                {% endif %}
                            </div>
                            <hr class="between_dotted">
                        </div>

                        <div id="div_id_day_6" style="display: none">
                            <div class="form-group">
                                {% if form.start_time_day_6.errors %}
                                    {{ form.start_time_day_6.errors }}
                                {% endif %}
                                <label for="{{ form.start_time_day_6.id_for_label }}">ساعت شروع برنامه (جمعه ها)
                                    :</label>
                                <br>
                                <div class="input-group">
                                    {% render_field form.start_time_day_6 type="time" class+="form-control" %}
                                    <div class="input-group-append">
                                <span class="input-group-text btn btn-danger btn-sm"
                                      onclick="document.getElementById('id_start_time_day_6').value=''">
                                    <i class="fas fa-times"></i>
                                </span>
                                    </div>
                                </div>
                                {% if form.start_time_day_6.help_text %}
                                    {{ form.start_time_day_6.help_text }} <br>
                                {% endif %}
                            </div>
                            <div class="form-group">
                                {% if form.end_time_day_6.errors %}
                                    {{ form.end_time_day_6.errors }}
                                {% endif %}
                                <label for="{{ form.end_time_day_6.id_for_label }}">ساعت پایان برنامه (جمعه ها)
                                    :</label>
                                <br>
                                <div class="input-group">
                                    {% render_field form.end_time_day_6 type="time" class+="form-control" %}
                                    <div class="input-group-append">
                                    <span class="input-group-text btn btn-danger btn-sm"
                                          onclick="document.getElementById('id_end_time_day_6').value=''">
                                        <i class="fas fa-times"></i>
                                    </span>
                                    </div>
                                </div>
                                {% if form.end_time_day_6.help_text %}
                                    {{ form.end_time_day_6.help_text }} <br>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    <hr id="hr_id_between_weekly_specified_date" class="between" style="display: none">
                    <div id="div_id_occasional" style="display: none">
                        <hr class="between">
                        <div class="form-group">
                            <input type="hidden" id="id_list_specified_date" name="list_specified_date"
                                   value="specified_date0">
                            <input type="hidden" id="id_list_specified_date_removed" name="list_specified_date_removed"
                                   value="">
                            {% if form.specified_date.errors %}
                                {{ form.specified_date.errors }}
                            {% endif %}
                            <label for="{{ form.specified_date.id_for_label }}">تاریخ برنامه مناسبتی :</label>
                            <div id="div_id_specified_date_add">
                                {% if is_valid is False %}
                                    {% if form.datetime_type.value == 'weekly' %}
                                        <div id="div_id_specified_date0" class="input-group" style="margin-top: 5px">
                                            <input type="date" placeholder="تاریخ 1" id="specified_date0"
                                                   name="specified_date0" class="form-control">
                                            <div id="div_div_id_specified_date0" class="input-group-append">
                                                <span class="input-group-text btn btn-danger btn-sm"
                                                      onclick="remove_occasional('0')">
                                                    <i class="fas fa-times"></i>
                                                </span>
                                            </div>
                                        </div>
                                    {% endif %}
                                {% else %}
                                    <div id="div_id_specified_date0" class="input-group" style="margin-top: 5px">
                                        <input type="date" placeholder="تاریخ 1" id="specified_date0"
                                               name="specified_date0" class="form-control">
                                        <div id="div_div_id_specified_date0" class="input-group-append">
                                            <span class="input-group-text btn btn-danger btn-sm"
                                                  onclick="remove_occasional('0')">
                                                <i class="fas fa-times"></i>
                                            </span>
                                        </div>
                                    </div>
                                {% endif %}
                            </div>
                            {% if form.specified_date.help_text %}
                                {{ form.specified_date.help_text }} <br>
                            {% endif %}
                        </div>
                        <div class="form-group">
                            <input type="hidden" id="id_list_specified_start_time"
                                   name="list_specified_start_time" value="specified_start_time0">
                            <input type="hidden" id="id_list_specified_start_time_removed"
                                   name="list_specified_start_time_removed" value="">
                            {% if form.specified_start_time.errors %}
                                {{ form.specified_start_time.errors }}
                            {% endif %}
                            <label for="{{ form.specified_start_time.id_for_label }}">ساعت شروع برنامه مناسبتی :</label>
                            <div id="div_id_specified_start_time_add">
                                {% if is_valid is False %}
                                    {% if form.datetime_type.value == 'weekly' %}
                                        <div id="div_id_specified_start_time0" class="input-group"
                                             style="margin-top: 5px">
                                            <input type="time" placeholder="ساعت شروع 1" id="specified_start_time0"
                                                   name="specified_start_time0" class="form-control">
                                            <div class="input-group-append">
                                                <span class="input-group-text btn btn-danger btn-sm"
                                                      onclick="remove_occasional('0')">
                                                    <i class="fas fa-times"></i>
                                                </span>
                                            </div>
                                        </div>
                                    {% endif %}
                                {% else %}
                                    <div id="div_id_specified_start_time0" class="input-group" style="margin-top: 5px">
                                        <input type="time" placeholder="ساعت شروع 1" id="specified_start_time0"
                                               name="specified_start_time0" class="form-control">
                                        <div class="input-group-append">
                                            <span class="input-group-text btn btn-danger btn-sm"
                                                  onclick="remove_occasional('0')">
                                                <i class="fas fa-times"></i>
                                            </span>
                                        </div>
                                    </div>
                                {% endif %}
                            </div>
                            {% if form.specified_start_time.help_text %}
                                {{ form.specified_start_time.help_text }} <br>
                            {% endif %}
                        </div>
                        <div class="form-group">
                            <input type="hidden" id="id_list_specified_end_time" name="list_specified_end_time"
                                   value="specified_end_time0">
                            <input type="hidden" id="id_list_specified_end_time_removed"
                                   name="list_specified_end_time_removed" value="">
                            {% if form.specified_end_time.errors %}
                                {{ form.specified_end_time.errors }}
                            {% endif %}
                            <label for="{{ form.specified_end_time.id_for_label }}">ساعت پایان برنامه مناسبتی :</label>
                            <div id="div_id_specified_end_time_add">
                                {% if is_valid is False %}
                                    {% if form.datetime_type.value == 'weekly' %}
                                        <div id="div_id_specified_end_time0" class="input-group"
                                             style="margin-top: 5px">
                                            <input type="time" placeholder="ساعت پایان 1" id="specified_end_time0"
                                                   name="specified_end_time0" class="form-control">
                                            <div class="input-group-append">
                                                <span class="input-group-text btn btn-danger btn-sm"
                                                      onclick="remove_occasional('0')">
                                                    <i class="fas fa-times"></i>
                                                </span>
                                            </div>
                                        </div>
                                    {% endif %}
                                {% else %}
                                    <div id="div_id_specified_end_time0" class="input-group" style="margin-top: 5px">
                                        <input type="time" placeholder="ساعت پایان 1" id="specified_end_time0"
                                               name="specified_end_time0" class="form-control">
                                        <div class="input-group-append">
                                            <span class="input-group-text btn btn-danger btn-sm"
                                                  onclick="remove_occasional('0')">
                                                <i class="fas fa-times"></i>
                                            </span>
                                        </div>
                                    </div>
                                {% endif %}
                            </div>
                            {% if form.specified_end_time.help_text %}
                                {{ form.specified_end_time.help_text }} <br>
                            {% endif %}
                        </div>
                        <span class="btn btn-primary btn-sm" onclick="add_occasional()"><i class="fa fa-plus"
                                                                                           aria-hidden="true"></i>افزودن</span>
                        <hr class="between">
                    </div>
                    <div class="form-group">
                        {% if form.logo.errors %}
                            {{ form.logo.errors }}
                        {% endif %}
                        <label for="{{ form.logo.id_for_label }}">لوگو :</label> <br>
                        <div class="input-group">
                            <div class="custom-file">
                                {% render_field form.logo class+="custom-file-input" %}
                                <label class="custom-file-label" for="{{ form.logo.id_for_label }}">انتخاب لوگو</label>
                            </div>
                        </div>
                        {% if form.logo.help_text %}
                            {{ form.logo.help_text }} <br>
                        {% endif %}
                    </div>
                    <div class="form-group">
                        {% if form.logo_link.errors %}
                            {{ form.logo_link.errors }}
                        {% endif %}
                        <label for="{{ form.logo_link.id_for_label }}">لینک لوگو :</label> <br>
                        {% render_field form.logo_link class+="form-control" %}
                        {% if form.logo_link.help_text %}
                            {{ form.logo_link.help_text }} <br>
                        {% endif %}
                    </div>
                    <div class="form-group">
                        {% if form.player_background.errors %}
                            {{ form.player_background.errors }}
                        {% endif %}
                        <label for="{{ form.player_background.id_for_label }}">تصویر پس زمینه پخش زنده :</label> <br>
                        <div class="input-group">
                            <div class="custom-file">
                                {% render_field form.player_background class+="custom-file-input" %}
                                <label class="custom-file-label" for="{{ form.player_background.id_for_label }}">انتخاب
                                    تصویر پس زمینه پخش زنده</label>
                            </div>
                        </div>
                        {% if form.player_background.help_text %}
                            {{ form.player_background.help_text }} <br>
                        {% endif %}
                    </div>
                    <div class="form-group">
                        {% if form.stream_type.errors %}
                            {{ form.stream_type.errors }}
                        {% endif %}
                        <label for="{{ form.stream_type.id_for_label }}">نوع پخش زنده :</label> <br>
                        {% render_field form.stream_type onchange="show_hide_stream_type()" class+="form-control" %}
                        <br>
                        {% if form.stream_type.help_text %}
                            {{ form.stream_type.help_text }} <br>
                        {% endif %}
                    </div>
                    <div id="div_id_audio" style="display: none">
                        <hr class="between">
                        <div class="form-group">
                            {% if form.audio_link.errors %}
                                {{ form.audio_link.errors }}
                            {% endif %}
                            <label for="{{ form.audio_link.id_for_label }}">لینک پخش زنده صوتی :</label> <br>
                            {% render_field form.audio_link class+="form-control" %}
                            {% if form.audio_link.help_text %}
                                {{ form.audio_link.help_text }} <br>
                            {% endif %}
                        </div>
                        <div class="form-group">
                            {% if form.audio_stats_link.errors %}
                                {{ form.audio_stats_link.errors }}
                            {% endif %}
                            <label for="{{ form.audio_stats_link.id_for_label }}">لینک آمار پخش زنده صوتی :</label> <br>
                            {% render_field form.audio_stats_link class+="form-control" %}
                            {% if form.audio_stats_link.help_text %}
                                {{ form.audio_stats_link.help_text }} <br>
                            {% endif %}
                        </div>
                        <div class="form-group">
                            {% if form.audio_platform_type.errors %}
                                {{ form.audio_platform_type.errors }}
                            {% endif %}
                            <label for="{{ form.audio_platform_type.id_for_label }}">نوع پلتفرم آمار پخش زنده صوتی
                                :</label>
                            <br>
                            {% render_field form.audio_platform_type class+="form-control" %}
                            {% if form.audio_platform_type.help_text %}
                                {{ form.audio_platform_type.help_text }} <br>
                            {% endif %}
                        </div>
                    </div>
                    <div id="div_id_video" style="display: none">
                        <hr class="between">
                        <div class="form-group">
                            {% if form.video_link.errors %}
                                {{ form.video_link.errors }}
                            {% endif %}
                            <label for="{{ form.video_link.id_for_label }}">لینک پخش زنده تصویری :</label> <br>
                            {% render_field form.video_link class+="form-control" %}
                            {% if form.video_link.help_text %}
                                {{ form.video_link.help_text }} <br>
                            {% endif %}
                        </div>
                        <div class="form-group">
                            {% if form.video_stats_link.errors %}
                                {{ form.video_stats_link.errors }}
                            {% endif %}
                            <label for="{{ form.video_stats_link.id_for_label }}">لینک آمار پخش زنده تصویری :</label>
                            <br>
                            {% render_field form.video_stats_link class+="form-control" %}
                            {% if form.video_stats_link.help_text %}
                                {{ form.video_stats_link.help_text }} <br>
                            {% endif %}
                        </div>
                        <div class="form-group">
                            {% if form.video_platform_type.errors %}
                                {{ form.video_platform_type.errors }}
                            {% endif %}
                            <label for="{{ form.video_platform_type.id_for_label }}">نوع پلتفرم آمار پخش زنده تصویری
                                :</label>
                            <br>
                            {% render_field form.video_platform_type class+="form-control" %}
                            {% if form.video_platform_type.help_text %}
                                {{ form.video_platform_type.help_text }} <br>
                            {% endif %}
                        </div>
                    </div>
                </form>
            </div>
            <!-- /.card-body -->
        </div>
    </div>
    <div class="col-12">
        <input type="submit" form="form_add" value="ذخیره تغییرات" class="btn btn-success float-left">
        <a href="{% url 'AdminPanel:admin_panel_program' %}" class="btn btn-secondary float-right">انصراف</a>
    </div>

{% endblock %}

{% block body_script %}
    <!-- flatpickr -->
    <script src="{% static 'AdminPanel/plugins/flatpickr/flatpickr.min.js' %}"></script>

    <script>
        let count_specified_date = 1;
        let count_specified_start_time = 1;
        let count_specified_end_time = 1;

        {#status#}
        if ('{{ form.status.value }}' == 'publish') {
            document.getElementById('id_status').value = 'publish';
        } else if ('{{ form.status.value }}' == 'draft') {
            document.getElementById('id_status').value = 'draft';
        } else if ('{{ form.status.value }}' == 'archive') {
            document.getElementById('id_status').value = 'archive';
        }

        {#description#}
        if ('{{ form.description.value }}' != 'None') {
            document.getElementById('id_description').innerHTML = '{{ form.description.value }}';
        }

        {#description_in_player#}
        if ('{{ form.description_in_player.value }}' != 'None') {
            document.getElementById('id_description_in_player').innerHTML = '{{ form.description_in_player.value }}';
        }

        {#datetime_type#}
        if ('{{ form.datetime_type.value }}' == 'weekly') {
            document.getElementById('id_datetime_type').value = 'weekly';
        } else if ('{{ form.datetime_type.value }}' == 'occasional') {
            document.getElementById('id_datetime_type').value = 'occasional';
        } else if ('{{ form.datetime_type.value }}' == 'weekly_occasional') {
            document.getElementById('id_datetime_type').value = 'weekly_occasional';
        }

        {#stream_type#}
        if ('{{ form.stream_type.value }}' == 'audio') {
            document.getElementById('id_stream_type').value = 'audio';

            {#audio_platform_type#}
            if ('{{ form.audio_platform_type.value }}' == 'shoutcast') {
                document.getElementById('id_audio_platform_type').value = 'shoutcast';
            } else if ('{{ form.audio_platform_type.value }}' == 'wowza') {
                document.getElementById('id_audio_platform_type').value = 'wowza';
            }
        } else if ('{{ form.stream_type.value }}' == 'video') {
            document.getElementById('id_stream_type').value = 'video';

            {#video_platform_type#}
            document.getElementById('id_video_platform_type').value = 'wowza';
        } else if ('{{ form.stream_type.value }}' == 'audio_video') {
            document.getElementById('id_stream_type').value = 'audio_video';

            {#audio_platform_type#}
            if ('{{ form.audio_platform_type.value }}' == 'shoutcast') {
                document.getElementById('id_audio_platform_type').value = 'shoutcast';
            } else if ('{{ form.audio_platform_type.value }}' == 'wowza') {
                document.getElementById('id_audio_platform_type').value = 'wowza';
            }

            {#video_platform_type#}
            document.getElementById('id_video_platform_type').value = 'wowza';
        }

        function use_flatpickr() {
            config = {
                dateFormat: "Y-m-d",
            }
            flatpickr("input[type=date]", config);
            config = {
                enableTime: true,
                noCalendar: true,
                dateFormat: "H:i:S",
            }
            flatpickr("input[type=time]", config);
        }

        use_flatpickr();

        function add_occasional_elements(element, value = "") {
            let div = document.createElement("div");
            let input = document.createElement("input");
            let span = document.createElement("span");
            let i = document.createElement("i");
            let name_occasional;
            let remove_occasional_input;
            let input_placeholder;
            if (element == "specified_date") {
                name_occasional = element + count_specified_date;
                remove_occasional_input = count_specified_date;
                input_placeholder = count_specified_date + 1;
                input.setAttribute("type", "date");
                input.setAttribute("placeholder", "تاریخ " + input_placeholder);
            } else if (element == "specified_start_time") {
                name_occasional = element + count_specified_start_time;
                remove_occasional_input = count_specified_start_time;
                input_placeholder = count_specified_start_time + 1;
                input.setAttribute("type", "time");
                input.setAttribute("placeholder", "ساعت شروع " + input_placeholder);
            } else {
                name_occasional = element + count_specified_end_time;
                remove_occasional_input = count_specified_end_time;
                input_placeholder = count_specified_end_time + 1;
                input.setAttribute("type", "time");
                input.setAttribute("placeholder", "ساعت پایان " + input_placeholder);
            }
            div.setAttribute("id", "div_id_" + name_occasional);
            div.setAttribute("class", "input-group");
            div.setAttribute("style", "margin-top: 5px");
            document.getElementById("div_id_" + element + "_add").appendChild(div);
            input.setAttribute("id", name_occasional);
            input.setAttribute("name", name_occasional);
            input.setAttribute("class", "form-control");
            input.setAttribute("value", value);
            document.getElementById("div_id_" + name_occasional).appendChild(input);
            div = document.createElement("div");
            div.setAttribute("id", "div_div_id_" + name_occasional);
            div.setAttribute("class", "input-group-append");
            document.getElementById("div_id_" + name_occasional).appendChild(div);
            span.setAttribute("class", "input-group-text btn btn-danger btn-sm");
            span.setAttribute("onclick", "remove_occasional(" + JSON.stringify(remove_occasional_input) + ")");
            i.setAttribute("class", "fas fa-times");
            i.setAttribute("aria-hidden", "true");
            span.appendChild(i);
            document.getElementById("div_div_id_" + name_occasional).appendChild(span);
            let list;
            if (element == "specified_date") {
                count_specified_date++;
                list = document.getElementById("id_list_specified_date").value;
                document.getElementById("id_list_specified_date").value = list + "," + name_occasional;
            } else if (element == "specified_start_time") {
                count_specified_start_time++;
                list = document.getElementById("id_list_specified_start_time").value;
                document.getElementById("id_list_specified_start_time").value = list + "," + name_occasional;
            } else {
                count_specified_end_time++;
                list = document.getElementById("id_list_specified_end_time").value;
                document.getElementById("id_list_specified_end_time").value = list + "," + name_occasional;
            }
            use_flatpickr();
        }

        function add_occasional() {
            add_occasional_elements("specified_date");
            add_occasional_elements("specified_start_time");
            add_occasional_elements("specified_end_time");
        }

        function remove_occasional(id) {
            let my_element = document.getElementById("div_id_specified_date" + id);
            my_element.remove();
            let specified_date_removed_old = document.getElementById("id_list_specified_date_removed").value;
            if (specified_date_removed_old == "") {
                document.getElementById("id_list_specified_date_removed").value = "specified_date" + id;
            } else {
                document.getElementById("id_list_specified_date_removed").value = specified_date_removed_old + ",specified_date" + id;
            }

            my_element = document.getElementById("div_id_specified_start_time" + id);
            my_element.remove();
            let specified_start_time_removed_old = document.getElementById("id_list_specified_start_time_removed").value;
            if (specified_start_time_removed_old == "") {
                document.getElementById("id_list_specified_start_time_removed").value = "specified_start_time" + id;
            } else {
                document.getElementById("id_list_specified_start_time_removed").value = specified_start_time_removed_old + ",specified_start_time" + id;
            }

            my_element = document.getElementById("div_id_specified_end_time" + id);
            my_element.remove();
            let specified_end_time_removed_old = document.getElementById("id_list_specified_end_time_removed").value;
            if (specified_end_time_removed_old == "") {
                document.getElementById("id_list_specified_end_time_removed").value = "specified_end_time" + id;
            } else {
                document.getElementById("id_list_specified_end_time_removed").value = specified_end_time_removed_old + ",specified_end_time" + id;
            }
        }

        {% if is_valid is False %}
            {% if form.datetime_type.value == 'occasional' or form.datetime_type.value == 'weekly_occasional' %}
                {% for this_specified_date in specified_date %}
                    add_occasional_elements("specified_date", '{{ this_specified_date }}')
                {% endfor %}
                {% for this_specified_start_time in specified_start_time %}
                    add_occasional_elements("specified_start_time", '{{ this_specified_start_time }}')
                {% endfor %}
                {% for this_specified_end_time in specified_end_time %}
                    add_occasional_elements("specified_end_time", '{{ this_specified_end_time }}')
                {% endfor %}
            {% endif %}
        {% endif %}

        show_hide_week_day('0');
        show_hide_week_day('1');
        show_hide_week_day('2');
        show_hide_week_day('3');
        show_hide_week_day('4');
        show_hide_week_day('5');
        show_hide_week_day('6');

        function show_hide_week_day(id) {
            let conditions_day = [
                document.getElementById('id_day_0').checked,
                document.getElementById('id_day_1').checked,
                document.getElementById('id_day_2').checked,
                document.getElementById('id_day_3').checked,
                document.getElementById('id_day_4').checked,
                document.getElementById('id_day_5').checked,
                document.getElementById('id_day_6').checked,
            ]
            if (id == '0') {
                if (conditions_day[0]) {
                    document.getElementById('hr_id_end_weekly_table').style.display = "block";
                    document.getElementById('div_id_day_0').style.display = "block"
                } else {
                    document.getElementById('div_id_day_0').style.display = "none"
                }
            } else if (id == '1') {
                if (conditions_day[1]) {
                    document.getElementById('hr_id_end_weekly_table').style.display = "block";
                    document.getElementById('div_id_day_1').style.display = "block"
                } else {
                    document.getElementById('div_id_day_1').style.display = "none"
                }
            } else if (id == '2') {
                if (conditions_day[2]) {
                    document.getElementById('hr_id_end_weekly_table').style.display = "block";
                    document.getElementById('div_id_day_2').style.display = "block"
                } else {
                    document.getElementById('div_id_day_2').style.display = "none"
                }
            } else if (id == '3') {
                if (conditions_day[3]) {
                    document.getElementById('hr_id_end_weekly_table').style.display = "block";
                    document.getElementById('div_id_day_3').style.display = "block"
                } else {
                    document.getElementById('div_id_day_3').style.display = "none"
                }
            } else if (id == '4') {
                if (conditions_day[4]) {
                    document.getElementById('hr_id_end_weekly_table').style.display = "block";
                    document.getElementById('div_id_day_4').style.display = "block"
                } else {
                    document.getElementById('div_id_day_4').style.display = "none"
                }
            } else if (id == '5') {
                if (conditions_day[5]) {
                    document.getElementById('hr_id_end_weekly_table').style.display = "block";
                    document.getElementById('div_id_day_5').style.display = "block"
                } else {
                    document.getElementById('div_id_day_5').style.display = "none"
                }
            } else {
                if (conditions_day[6]) {
                    document.getElementById('hr_id_end_weekly_table').style.display = "block";
                    document.getElementById('div_id_day_6').style.display = "block"
                } else {
                    document.getElementById('div_id_day_6').style.display = "none"
                }
            }
            if (!(conditions_day[0]) && !(conditions_day[1]) && !(conditions_day[2]) && !(conditions_day[3]) && !(conditions_day[4]) && !(conditions_day[5]) && !(conditions_day[6])) {
                document.getElementById('hr_id_end_weekly_table').style.display = "none";
            }
        }

        function show_hide_datetime_type() {
            let get_datetime_type = document.getElementById("id_datetime_type");
            let datetime_type_selected = get_datetime_type.options[get_datetime_type.selectedIndex].text;
            if (datetime_type_selected == '---------') {
                {#Hide weekly#}
                weekly = document.getElementById("div_id_weekly");
                weekly.style.display = "none";
                {#Hide specified_date#}
                specified_date = document.getElementById("div_id_occasional");
                specified_date.style.display = "none";
                {#Hide hr_between_weekly_specified_date#}
                hr_between_weekly_specified_date = document.getElementById("hr_id_between_weekly_specified_date");
                hr_between_weekly_specified_date.style.display = "none";
            } else if (datetime_type_selected == 'هفتگی') {
                {#Show weekly#}
                weekly = document.getElementById("div_id_weekly");
                weekly.style.display = "block";
                {#Hide specified_date#}
                specified_date = document.getElementById("div_id_occasional");
                specified_date.style.display = "none";
                {#Show hr_between_weekly_specified_date#}
                hr_between_weekly_specified_date = document.getElementById("hr_id_between_weekly_specified_date");
                hr_between_weekly_specified_date.style.display = "block";
            } else if (datetime_type_selected == 'مناسبتی') {
                {#Show specified_date#}
                specified_date = document.getElementById("div_id_occasional");
                specified_date.style.display = "block";
                {#Hide weekly#}
                weekly = document.getElementById("div_id_weekly");
                weekly.style.display = "none";
                {#Hide hr_between_weekly_specified_date#}
                hr_between_weekly_specified_date = document.getElementById("hr_id_between_weekly_specified_date");
                hr_between_weekly_specified_date.style.display = "none";
            } else if (datetime_type_selected == 'هفتگی - مناسبتی') {
                {#Show weekly#}
                weekly = document.getElementById("div_id_weekly");
                weekly.style.display = "block";
                {#Show specified_date#}
                specified_date = document.getElementById("div_id_occasional");
                specified_date.style.display = "block";
                {#Hide hr_between_weekly_specified_date#}
                hr_between_weekly_specified_date = document.getElementById("hr_id_between_weekly_specified_date");
                hr_between_weekly_specified_date.style.display = "none";
            }
        }

        show_hide_datetime_type();

        function show_hide_stream_type() {
            let get_stream_type = document.getElementById("id_stream_type");
            let stream_type_selected = get_stream_type.options[get_stream_type.selectedIndex].text;
            if (stream_type_selected == '---------') {
                {#Hide audio#}
                audio = document.getElementById("div_id_audio");
                audio.style.display = "none";
                {#Hide video#}
                video = document.getElementById("div_id_video");
                video.style.display = "none";
            } else if (stream_type_selected == 'صوتی') {
                {#Show audio#}
                audio = document.getElementById("div_id_audio");
                audio.style.display = "block";
                {#Hide video#}
                video = document.getElementById("div_id_video");
                video.style.display = "none";
            } else if (stream_type_selected == 'تصویری') {
                {#Show video#}
                video = document.getElementById("div_id_video");
                video.style.display = "block";
                {#Hide audio#}
                audio = document.getElementById("div_id_audio");
                audio.style.display = "none";
            } else if (stream_type_selected == 'صوتی و تصویری') {
                {#Show audio#}
                audio = document.getElementById("div_id_audio");
                audio.style.display = "block";
                {#Show video#}
                video = document.getElementById("div_id_video");
                video.style.display = "block";
            }
        }

        show_hide_stream_type();
    </script>
    <!-- bs-custom-file-input -->
    <script src="{% static 'AdminPanel/plugins/bs-custom-file-input/bs-custom-file-input.min.js' %}"></script>
    <!-- Page specific script -->
    <script>
        $(function () {
            bsCustomFileInput.init();
        });
    </script>
{% endblock %}